T = {
    "welcome": {
        "RU": "–ü—Ä–∏–≤–µ—Ç! –Ø –Ω–µ–π—Ä–æ–Ω–Ω—ã–µ —Å–≤—è–∑–∏ –∏–∑ –≥–æ–ª–æ–≤—ã —Å—É–ø–µ—Ä–≤–∞–π–∑–µ—Ä–∞ –ê—Ö–º–µ–¥–∞. –í—ã–±–µ—Ä–∏ —è–∑—ã–∫:",
        "EN": "Hi! I'm Ahmed's supervisor neural links. Choose your language:",
        "UZ": "Salom! Men Ahmedning nazoratchi neyron bog'lari. Tilni tanlang:",
        "TJ": "–°–∞–ª–æ–º! –ú–∞–Ω –ø–∞–π–≤–∞–Ω–¥“≥–æ–∏ –∞—Å–∞–±–∏ –Ω–∞–∑–æ—Ä–∞—Ç–≥–∞—Ä–∏ –ê—Ö–º–µ–¥. –ó–∞–±–æ–Ω—Ä–æ –∏–Ω—Ç–∏—Ö–æ–± –∫—É–Ω–µ–¥:",
        "KG": "–°–∞–ª–∞–º! –ú–µ–Ω –ê—Ö–º–µ–¥–¥–∏–Ω —Å—É–ø–µ—Ä–≤–∞–π–∑–µ—Ä–∏ –Ω–µ–π—Ä–æ–Ω –±–∞–π–ª–∞–Ω—ã—à—ã–º—ã–Ω. –¢–∏–ª–¥–∏ —Ç–∞–Ω–¥–∞“£—ã–∑:"
    },
    "role_prompt": {
        "RU": "–í—ã–±–µ—Ä–∏ —Å–≤–æ—é —Ä–æ–ª—å:", "EN": "Choose your role:", "UZ": "Rolni tanlang:",
        "TJ": "–†–æ–ª–∞—Ç–æ–Ω—Ä–æ –∏–Ω—Ç–∏—Ö–æ–± –∫—É–Ω–µ–¥:", "KG": "–†–æ–ª—É“£—É–∑–¥—É —Ç–∞–Ω–¥–∞“£—ã–∑:"
    },
    "choose_shop": {
        "RU": "–í—ã–±–µ—Ä–∏ —Ç–æ—Ä–≥–æ–≤—É—é —Ç–æ—á–∫—É:", "EN": "Choose your main shop:",
        "UZ": "Asosiy savdo nuqtangizni tanlang:", "TJ": "–§—É—Ä”Ø—à–≥–æ“≥–∏ –∞—Å–æ—Å–∏–∏ —Ö—É–¥—Ä–æ –∏–Ω—Ç–∏—Ö–æ–± –∫—É–Ω–µ–¥:",
        "KG": "–ë–∞—à–∫—ã —Å–æ–æ–¥–∞ —á–µ–∫—Ç–µ“£–∏–∑–¥–∏ —Ç–∞–Ω–¥–∞“£—ã–∑:"
    },
    "role_confirm": {
        "RU": "–û—Ç–ª–∏—á–Ω–æ! –¢–≤–æ—è —Ä–æ–ª—å", "EN": "Great! Your role is", "UZ": "Zo'r! Sizning rolingiz",
        "TJ": "–ê—ä–ª–æ! –†–æ–ª–∏ —à—É–º–æ", "KG": "–°—É–ø–µ—Ä! –°–∏–∑–¥–∏–Ω —Ä–æ–ª—É“£—É–∑"
    },
    "help": {
        "RU": "–ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?", "EN": "What can I help you with?", "UZ": "Sizga nima yordam bera olaman?",
        "TJ": "–ß”£ –≥—É–Ω–∞ –º–∞–Ω –±–∞ —à—É–º–æ –∫”Ø–º–∞–∫ –∫–∞—Ä–¥–∞ –º–µ—Ç–∞–≤–æ–Ω–∞–º?", "KG": "–≠–º–Ω–µ –∂–∞—Ä–¥–∞–º –±–µ—Ä–µ –∞–ª–∞–º?"
    },
    "feedback_thanks": {"RU":"–°–ø–∞—Å–∏–±–æ –∑–∞ –æ—Ç–∑—ã–≤! üôå","EN":"Thank you for your feedback! üôå","UZ":"Fikringiz uchun rahmat! üôå","TJ":"–¢–∞—à–∞–∫–∫—É—Ä –±–∞—Ä–æ–∏ —Ñ–∏–∫—Ä–∞—Ç–æ–Ω! üôå","KG":"–ü–∏–∫–∏—Ä–∏“£–∏–∑ “Ø—á“Ø–Ω —Ä–∞—Ö–º–∞—Ç! üôå"},
    "choose_language": {"RU":"–í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫:","EN":"Choose language:","UZ":"Tilni tanlang:","TJ":"–ó–∞–±–æ–Ω—Ä–æ –∏–Ω—Ç–∏—Ö–æ–± –∫—É–Ω–µ–¥:","KG":"–¢–∏–ª–¥–∏ —Ç–∞–Ω–¥–∞“£—ã–∑:"},
    "lang_updated": {"RU":"–Ø–∑—ã–∫ –æ–±–Ω–æ–≤–ª—ë–Ω ‚úÖ","EN":"Language updated ‚úÖ","UZ":"Til yangilandi ‚úÖ","TJ":"–ó–∞–±–æ–Ω –Ω–∞–≤ –∫–∞—Ä–¥–∞ —à—É–¥ ‚úÖ","KG":"–¢–∏–ª –∂–∞“£—ã—Ä—Ç—ã–ª–¥—ã ‚úÖ"},
    "training":{"RU":"–û–±—É—á–∞–ª–∫–∏ –Ω–æ–≤–∏—á–∫–∞–º","EN":"Training","UZ":"Yangi boshlanuvchilar","TJ":"–û–º”Ø–∑–∏—à","KG":"–ñ–∞“£—ã –±–∞—à—Ç–∞–≥–∞–Ω–¥–∞—Ä"},
    "urgent_problem":{"RU":"–°—Ä–æ—á–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ üö®","EN":"Urgent problem üö®","UZ":"Tezkor muammo üö®","TJ":"–ú—É–∞–º–º–æ–∏ —Å–∞—Ä–∏–≤–∞“õ—Ç”£ üö®","KG":"–¢–µ–∑ –∂–∞—Ä–¥–∞–º üö®"},
    "supervisor_contacts":{"RU":"–ö–æ–Ω—Ç–∞–∫—Ç—ã —Å—É–ø–µ—Ä–≤–∞–π–∑–µ—Ä–∞","EN":"Supervisor contacts","UZ":"Nazoratchi kontaktlari","TJ":"–¢–∞–º–æ—Å –±–æ –Ω–∞–∑–æ—Ä–∞—Ç—á”£","KG":"–°—É–ø–µ—Ä–≤–∞–π–∑–µ—Ä –±–∞–π–ª–∞–Ω—ã—à—Ç–∞—Ä—ã"},
    "chat_links":{"RU":"–°—Å—ã–ª–∫–∏ –Ω–∞ —á–∞—Ç—ã","EN":"Chat links","UZ":"Chat havolalari","TJ":"–°—Å—ã–ª–∫–∞ –±–∞ —á–∞—Ç","KG":"–ß–∞—Ç —à–∏–ª—Ç–µ–º–µ–ª–µ—Ä–∏"},
    "feedback":{"RU":"–û—Å—Ç–∞–≤–∏—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ","EN":"Feedback","UZ":"Fikringizni qoldiring","TJ":"–§–∏–∫—Ä –≥—É–∑–æ—Ä–µ–¥","KG":"–ü–∏–∫–∏—Ä –∫–∞–ª—Ç—ã—Ä—ã“£—ã–∑"},
    "change_lang":{"RU":"–°–º–µ–Ω–∏—Ç—å —è–∑—ã–∫","EN":"Change language","UZ":"Tilni o'zgartirish","TJ":"–ó–∞–±–æ–Ω—Ä–æ –∏–≤–∞–∑ –∫—É–Ω–µ–¥","KG":"–¢–∏–ª–¥–∏ ”©–∑–≥”©—Ä—Ç“Ø“Ø"},
    "assembly_rating":{"RU":"–†–µ–π—Ç–∏–Ω–≥ —Å–±–æ—Ä–∫–∏","EN":"Assembly rating","UZ":"Yig‚Äòish reytingi","TJ":"–†–µ–π—Ç–∏–Ω–≥–∏ “∑–∞–º—ä–æ–≤–∞—Ä”£","KG":"–ñ—ã–π–Ω–æ–æ —Ä–µ–π—Ç–∏–Ω–≥–∏"}
}

from db import get_user

def get_user_lang(user_id):
    user = get_user(user_id)
    return user[4] if user and user[4] else "RU"

def tr(key, user_id=None, lang=None):
    if user_id:
        lang = get_user_lang(user_id)
    if not lang:
        lang = "RU"
    return T.get(key, {}).get(lang, key)